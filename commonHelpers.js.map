{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImages (query, onCurrentPage) {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: '44402114-eddf09e8e038ad1f496236950',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: onCurrentPage,\n        }\n    });\n    return response.data\n}","export function imagesTemplate(image) {\n    return `<li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\"><img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>\n        <ul class=\"gallery-list\">\n          <li class=\"list-item\">\n            <h3>Likes</h3>\n            <p class=\"likes\">${image.likes}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Views</h3>\n            <p class=\"views\">${image.views}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Comments</h3>\n            <p class=\"comments\">${image.comments}</p>\n          </li>\n          <li class=\"list-item\">\n            <h3>Downloads</h3>\n            <p class=\"downloads\">${image.downloads}</p>\n          </li>\n        </ul>\n    </li>`;\n}\n\nexport function galleryTemplate(arr) {\n    return arr.map(image => imagesTemplate(image)).join(\"\");\n}\n\nexport function showLoader(loader) {\n    loader.classList.remove(\"loader-hidden\");\n}\n\nexport function hideLoader(loader) {\n    loader.classList.add(\"loader-hidden\");\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { galleryTemplate, showLoader, hideLoader } from \"./js/render-functions\";\n\nconst lightBox = new SimpleLightbox('.gallery a', {});\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loaderBtn = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".load\")\n\nlet page;\nlet userValue;\nlet maxPages;\n\nfunction errorMessage(message) {\n    iziToast.show({\n        message,\n    });\n}\n\nfunction pageScroll() {\n    const formItem = document.querySelector(\".list-item\");\n    const height = formItem.getBoundingClientRect().height;\n    window.scrollBy({\n        top: height,\n        left: 0,\n        behavior: \"smooth\",\n    });\n}\n\nfunction status() {\n    if (page >= maxPages) {\n        hideLoader(loaderBtn);\n        hideLoader(loadBtn);\n        errorMessage(\"We're sorry, but you've reached the end of search results.\");\n    }\n}\n\nform.addEventListener(\"submit\", formSubmit);\n\nasync function formSubmit(event) {\n    event.preventDefault();\n\n    hideLoader(loadBtn);\n    gallery.innerHTML = \"\";\n\n    userValue = form.elements.search.value.trim();\n    if (!userValue) return\n    page = 1;\n    showLoader(loaderBtn);\n\n    try {\n        const data = await getImages(userValue, page);\n        if (!data.hits.length) {\n            errorMessage(\"Sorry, there are no images matching your search query. Please try again!\")\n            hideLoader(loaderBtn);\n            return;\n        }\n\n        const markup = galleryTemplate(data.hits);\n        gallery.innerHTML = markup;\n        maxPages = Math.ceil(data.totalHits / 15);\n    } catch (error) { errorMessage(error) };\n\n    lightBox.refresh()\n    hideLoader(loaderBtn);\n    showLoader(loadBtn);\n    status();\n}\n\nloadBtn.addEventListener(\"click\", loadClick);\n\nasync function loadClick() {\n    hideLoader(loadBtn);\n    showLoader(loaderBtn);\n    page += 1;\n\n         try {\n    const data = await getImages(userValue, page);\n    const markup = galleryTemplate(data.hits);\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    } catch (error) { errorMessage(\"We're sorry, but you've reached the end of search results.\") };\n    \n    lightBox.refresh()\n    hideLoader(loaderBtn);\n    showLoader(loadBtn);\n    pageScroll();\n    status();\n}"],"names":["getImages","query","onCurrentPage","axios","imagesTemplate","image","galleryTemplate","arr","showLoader","loader","hideLoader","lightBox","SimpleLightbox","form","gallery","loaderBtn","loadBtn","page","userValue","maxPages","errorMessage","message","iziToast","pageScroll","height","status","formSubmit","event","data","markup","error","loadClick"],"mappings":"+vBAEO,eAAeA,EAAWC,EAAOC,EAAe,CAYnD,OAXiB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACT,CACT,CAAK,GACe,IACpB,CCfO,SAASE,EAAeC,EAAO,CAClC,MAAO;AAAA,iBACMA,EAAM,aAAa,qCAAqCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,+BAIhFA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kCAIRA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,mCAIbA,EAAM,SAAS;AAAA;AAAA;AAAA,UAIlD,CAEO,SAASC,EAAgBC,EAAK,CACjC,OAAOA,EAAI,IAAIF,GAASD,EAAeC,CAAK,CAAC,EAAE,KAAK,EAAE,CAC1D,CAEO,SAASG,EAAWC,EAAQ,CAC/BA,EAAO,UAAU,OAAO,eAAe,CAC3C,CAEO,SAASC,EAAWD,EAAQ,CAC/BA,EAAO,UAAU,IAAI,eAAe,CACxC,CCzBA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAE9CC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,SAAS,EAC5CC,EAAU,SAAS,cAAc,OAAO,EAE9C,IAAIC,EACAC,EACAC,EAEJ,SAASC,EAAaC,EAAS,CAC3BC,EAAS,KAAK,CACV,QAAAD,CACR,CAAK,CACL,CAEA,SAASE,GAAa,CAElB,MAAMC,EADW,SAAS,cAAc,YAAY,EAC5B,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,IAAKA,EACL,KAAM,EACN,SAAU,QAClB,CAAK,CACL,CAEA,SAASC,GAAS,CACVR,GAAQE,IACRT,EAAWK,CAAS,EACpBL,EAAWM,CAAO,EAClBI,EAAa,4DAA4D,EAEjF,CAEAP,EAAK,iBAAiB,SAAUa,CAAU,EAE1C,eAAeA,EAAWC,EAAO,CAO7B,GANAA,EAAM,eAAc,EAEpBjB,EAAWM,CAAO,EAClBF,EAAQ,UAAY,GAEpBI,EAAYL,EAAK,SAAS,OAAO,MAAM,KAAI,EACvC,EAACK,EACL,CAAAD,EAAO,EACPT,EAAWO,CAAS,EAEpB,GAAI,CACA,MAAMa,EAAO,MAAM5B,EAAUkB,EAAWD,CAAI,EAC5C,GAAI,CAACW,EAAK,KAAK,OAAQ,CACnBR,EAAa,0EAA0E,EACvFV,EAAWK,CAAS,EACpB,MACH,CAED,MAAMc,EAASvB,EAAgBsB,EAAK,IAAI,EACxCd,EAAQ,UAAYe,EACpBV,EAAW,KAAK,KAAKS,EAAK,UAAY,EAAE,CAC3C,OAAQE,EAAO,CAAEV,EAAaU,CAAK,CACxC,CACInB,EAAS,QAAS,EAClBD,EAAWK,CAAS,EACpBP,EAAWQ,CAAO,EAClBS,IACJ,CAEAT,EAAQ,iBAAiB,QAASe,CAAS,EAE3C,eAAeA,GAAY,CACvBrB,EAAWM,CAAO,EAClBR,EAAWO,CAAS,EACpBE,GAAQ,EAEH,GAAI,CACT,MAAMW,EAAO,MAAM5B,EAAUkB,EAAWD,CAAI,EACtCY,EAASvB,EAAgBsB,EAAK,IAAI,EACxCd,EAAQ,mBAAmB,YAAae,CAAM,CAC7C,MAAe,CAAET,EAAa,4DAA4D,CAC/F,CACIT,EAAS,QAAS,EAClBD,EAAWK,CAAS,EACpBP,EAAWQ,CAAO,EAClBO,IACAE,GACJ"}